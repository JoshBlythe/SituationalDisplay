 <!DOCTYPE HTML>
 <!-- followed guide to Display map https://switch2osm.org/using-tiles/getting-started-with-leaflet/ -->
<html>
  <head>
  	<title>Testing leaflet</title>
<style type="text/css">
	#map{ height: 800px; }
</style>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>
<head>


</head>
	<body>
      <p id="data"></p>
      <p id="demo"></p>
		 <div id="map">
       
     </div>
     <div ></div>

  <script type="text/javascript">
      var myObj;
      // var planes;

      if(myObj === undefined)
      {
        getData();
      }

      // initialize Leaflet
      var map = L.map('map').setView({lon: -1.8808, lat: 50.7192}, 10);

      // add the OpenStreetMap tiles
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', 
      {
        minZoom: 9,
        maxZoom: 12,
        attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
      }).addTo(map);

      // show the scale bar on the lower left corner
      L.control.scale().addTo(map);    

      var layerControl = L.layerGroup().addTo(map);



    function getData()
    {

      var xmlhttp = new XMLHttpRequest();

      xmlhttp.onreadystatechange = function()
      {
        if (this.readyState == 4 && this.status == 200) 
        {          
          myObj = JSON.parse(this.responseText);
          document.getElementById("data").innerHTML = myObj;

          document.getElementById("demo").innerHTML = myObj.Hexideimal + " " + myObj.altitude + " " + myObj.lat + " " + myObj.long;
        }
      };

      xmlhttp.open("GET", "clientPHP.php", true);
      xmlhttp.send();

      //drawplane(myObj);
    }

    function drawplane()
    {
      // var pos = {lat:"50.7192", long:"1.8808"};

     var myIcon = L.icon({
    iconUrl: '/img/plane.jpg',
    iconSize: [20, 25],
    iconAngle: 40,
    
    });
    L.marker([myObj.lat , myObj.long], {icon: myIcon}).addTo(layerControl);
    
    // myIcon = planes;

    // map.removLayer(myIcon);
    }


    function UpdatePlane()
    {
      // planes.setLatLong([myObj.lat , myObj.long]).update();
      // planes.setIconAngle(30);
      layerControl.clearLayers();
    }

    window.setInterval(function()
    {
        getData();
        drawplane();
        // UpdatePlane();
    }, 1000);

	</script>

<!--   <script type="text/javascript">

    function getData()
    {

      var xmlhttp = new XMLHttpRequest();

      xmlhttp.onreadystatechange = function()
      {
        if (this.readyState == 4 && this.status == 200) 
        {          
          var myObj = JSON.parse(this.responseText);
          document.getElementById("data").innerHTML = JSON.stringify(myObj);

          document.getElementById("demo").innerHTML = myObj.heading;
        }
      };

      xmlhttp.open("GET", "clientPHP.php", true);
      xmlhttp.send();
    }

    window.setInterval(function()
    {
        getData();
    }, 1000);
  </script> -->
	</body>



</html>

